# LifeMaestro Configuration
# =========================
# Copy to ~/.config/lifemaestro/config.toml and customize

[maestro]
version = "0.2.0"

# ============================================
# ADAPTERS
# ============================================
# Order determines preference (first available is used)

[adapters]
ai = ["claude", "ollama", "llm"]
mail = ["himalaya", "imap"]
calendar = ["khal", "gcalcli"]
tasks = ["taskwarrior", "todoist"]
secrets = ["sops", "pass", "env"]
search = ["notmuch", "grep"]

# ============================================
# ZONES (Flexible namespaces for any context)
# ============================================
# Zones replace hardcoded work/home. Define any zones you need.
# Each zone can enable/disable features independently.

[zones.default]
# The default zone when none is detected
name = "personal"

[zones.personal]
name = "personal"
description = "Personal projects and learning"

[zones.personal.git]
user = "Your Name"
email = "you@personal.com"

[zones.personal.github]
ssh_host = "github.com-home"
username = "your-personal-username"

[zones.personal.aws]
profile = "home-sso"
region = "us-west-2"

[zones.personal.ai]
provider = "claude"
backend = "anthropic"

[zones.personal.mail]
account = "gmail"

[zones.personal.rules]
safety = "relaxed"

# Optional features - all disabled for personal
[zones.personal.features]
tickets = false
sdp = false
jira = false
linear = false

# Example work zone - copy and customize for your employer
[zones.acme-corp]
name = "acme-corp"
description = "Acme Corporation work projects"

[zones.acme-corp.git]
user = "Your Name"
email = "you@acme-corp.com"

[zones.acme-corp.github]
ssh_host = "github.com-work"
username = "your-work-username"

[zones.acme-corp.aws]
profile = "work-sso"
region = "us-east-1"

[zones.acme-corp.ai]
provider = "claude"
backend = "bedrock"

[zones.acme-corp.mail]
account = "work"

[zones.acme-corp.rules]
safety = "strict"

# Optional features enabled for work
[zones.acme-corp.features]
tickets = true
sdp = true           # ServiceDesk Plus integration
jira = false         # Set true if using Jira
linear = false       # Set true if using Linear
github_issues = true

# ServiceDesk Plus config (only used if sdp = true)
[zones.acme-corp.sdp]
base_url = "https://sdp.acme-corp.com/api/v3"
# API key should be in env: SDP_API_KEY or secrets

# Jira config (only used if jira = true)
[zones.acme-corp.jira]
base_url = "https://acme-corp.atlassian.net"
project_key = "ACME"

# Linear config (only used if linear = true)
[zones.acme-corp.linear]
team_id = ""

# Zone detection patterns (regex matched against pwd)
[zones.detection]
patterns = [
    { pattern = "~/work|~/projects/acme", zone = "acme-corp" },
    { pattern = "~/personal|~/projects/home", zone = "personal" },
]

# ============================================
# AI PROVIDERS
# ============================================

[ai]
default_provider = "claude"
default_code_provider = "claude"
default_fast_provider = "ollama"

[ai.claude]
enabled = true
# Auth: ANTHROPIC_API_KEY env var or AWS Bedrock

[ai.openai]
enabled = true
default_model = "gpt-4o"
# Auth: OPENAI_API_KEY env var

[ai.ollama]
enabled = true
default_model = "llama3.2"
embed_model = "nomic-embed-text"
auto_start = true

[ai.amazon-q]
enabled = false
# Auth: AWS SSO

[ai.gh-copilot]
enabled = false
# Auth: gh auth login

[ai.aider]
enabled = true
backend = "anthropic"  # or "openai", "ollama", "bedrock"

[ai.llm]
enabled = true
# Simon Willison's llm tool

[ai.gemini]
enabled = false
# Auth: GEMINI_API_KEY env var

[ai.mistral]
enabled = false
# Auth: MISTRAL_API_KEY env var

[ai.groq]
enabled = false
# Auth: GROQ_API_KEY env var

# Consumer accounts (browser sessions)
[ai.claude-web]
enabled = false
browser = "chrome"
profile = "Default"

[ai.chatgpt]
enabled = false
browser = "chrome"
profile = "Default"

# ============================================
# MAIL ACCOUNTS
# ============================================

[mail.accounts.work]
type = "ms365"
email = "you@company.com"
# OAuth config in secrets

[mail.accounts.gmail]
type = "gmail"
email = "you@gmail.com"
# OAuth config in secrets

# ============================================
# KEEPALIVE
# ============================================

[keepalive]
enabled = true
interval = 300  # seconds

[keepalive.thresholds]
aws_sso = 3600      # refresh when < 1 hour left
oauth = 600         # refresh when < 10 min left
azure_ad = 3000     # refresh when < 50 min left

[keepalive.notifications]
enabled = true
critical_only = false

[keepalive.autostart]
enabled = true
method = "background"  # or "systemd", "launchd"

[keepalive.monitor]
api = ["bedrock", "azure-openai"]
consumer = []
local = ["ollama"]

# ============================================
# SESSIONS
# ============================================

[sessions]
base_dir = "~/ai-sessions"  # Where session repos live
default_zone = "personal"

# Repos are now per-zone
[sessions.repos.personal]
explorations = "your-username/explorations"
learning = "your-username/learning"

[sessions.repos.acme-corp]
tickets = "your-org/work-tickets"
explorations = "your-org/work-explorations"

# ============================================
# SKILLS
# ============================================

[skills]
# Additional skill directories to load
extra_dirs = []

# Default providers for skill AI levels
[skills.providers]
light = "ollama"    # Fast, cheap for simple tasks
medium = "claude"   # Better for drafting, summarizing
full = "claude"     # Interactive sessions

# ============================================
# CREDENTIALS
# ============================================

[credentials]
default_source = "secrets"

[credentials.sources]
oauth_clients = "secrets"     # In-repo (encrypted)
api_keys = "env"              # Environment variables
aws = "aws-sso"               # AWS SSO flow

# Environment variable mappings
[credentials.env]
anthropic = "ANTHROPIC_API_KEY"
openai = "OPENAI_API_KEY"
gemini = "GEMINI_API_KEY"
mistral = "MISTRAL_API_KEY"
groq = "GROQ_API_KEY"
